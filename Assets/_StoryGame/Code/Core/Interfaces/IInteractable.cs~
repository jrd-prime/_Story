using System.Threading.Tasks;
using Cysharp.Threading.Tasks;
using UnityEngine;

namespace Game.Core.Interfaces
{
    /// <summary>
    /// Интерфейс для объектов, с которыми можно взаимодействовать
    /// </summary>
    public interface IInteractable
    {
        /// <summary>
        /// Идентификатор объекта
        /// </summary>
        string Id { get; }

        /// <summary>
        /// Название объекта
        /// </summary>
        string Name { get; }

        /// <summary>
        /// Описание объекта
        /// </summary>
        string Description { get; }

        /// <summary>
        /// Тип взаимодействия
        /// </summary>
        InteractionType InteractionType { get; }

        /// <summary>
        /// Позиция объекта в мире
        /// </summary>
        Vector3 Position { get; }

        /// <summary>
        /// Радиус взаимодействия
        /// </summary>
        float InteractionRadius { get; }

        /// <summary>
        /// Можно ли взаимодействовать с объектом
        /// </summary>
        bool IsInteractable { get; set; }

        /// <summary>
        /// Взаимодействие с объектом
        /// </summary>
        /// <param name="character">Персонаж, взаимодействующий с объектом</param>
        /// <returns>Успешность взаимодействия</returns>
        Task<bool> Interact(ICharacter character);

        /// <summary>
        /// Проверить, находится ли персонаж в радиусе взаимодействия
        /// </summary>
        /// <param name="character">Персонаж</param>
        /// <returns>Находится ли персонаж в радиусе взаимодействия</returns>
        bool IsInInteractionRange(ICharacter character);

        /// <summary>
        /// Получить подсказку для взаимодействия
        /// </summary>
        /// <returns>Подсказка</returns>
        string GetInteractionHint();

        // Костыль для квесто, надо будет убрать
        UniTask StartDelayAsync(int i);
    }

    /// <summary>
    /// Типы взаимодействия
    /// </summary>
    public enum InteractionType
    {
        Use, // Использовать
        Talk, // Говорить
        Examine, // Осмотреть
        Take, // Взять
        Open, // Открыть
        Close, // Закрыть
        Cook, // Готовить
        Clean, // Очистить
        Repair, // Починить
        Activate, // Активировать
        Deactivate // Деактивировать
    }
}
