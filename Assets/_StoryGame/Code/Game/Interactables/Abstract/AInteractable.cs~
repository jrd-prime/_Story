using System;
using _StoryGame.Game.Interactables.Interfaces;
using UnityEngine;
using VContainer;

namespace _StoryGame.Game.Interactables.Abstract
{
    public abstract class AInteractable<TInteractableSystem> : AInteractableBase
        where TInteractableSystem : IInteractableSystem
    {
        protected TInteractableSystem System;

        protected sealed override void ResolveSystem(IObjectResolver resolver)
        {
            Debug.LogWarning("ResolveSystem");
            System = resolver.Resolve<TInteractableSystem>();
            if (Equals(System, default(TInteractableSystem)))
                throw new Exception("InteractableSystem is null. " + gameObject.name);
        }

        private void Start()
        {
            Debug.LogWarning("ResolveSystem1");
            System = Resolver.Resolve<TInteractableSystem>();
            if (Equals(System, default(TInteractableSystem)))
                throw new Exception("InteractableSystem is null. " + gameObject.name);
        }
    }
}
